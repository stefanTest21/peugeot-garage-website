!function(e,t){"use strict";function n(){var t=e("#happy-addons-editor-dark-css");t.length||(t=e("<link>",{id:"happy-addons-editor-dark-css",rel:"stylesheet",href:HappyAddonsEditor.darkStylesheetURL})),elementor.settings.editorPreferences.model.on("change:ui_theme",function(e,n){if("light"===n)return void t.remove();t.attr("media","auto"===n?"(prefers-color-scheme: dark)":"").appendTo(elementorCommon.elements.$body)})}t.hasIconLibrary=function(){return elementor.helpers&&elementor.helpers.renderIcon},t.getFeatureLabel=function(e){var t=document.createElement("DIV");return t.innerHTML=e,e=t.textContent||t.innerText||e,e.length>20?e.substring(0,20)+"...":e},t.translate=function(e,t){return elementorCommon.translate(e,null,t,HappyAddonsEditor.i18n)},window.ha_get_feature_label=t.getFeatureLabel,window.ha_has_icon_library=t.hasIconLibrary,window.ha_translate=t.translate,t.getButtonWithIcon=function(e,n){var o,i,a,r,s,d=[],l={};if(n=n||{},n=_.defaults(n,{oldIcon:"button_icon",iconPos:"button_icon_position",newIcon:"button_selected_icon",text:"button_text",link:"button_link",class:"ha-btn ha-btn--link",textClass:"ha-btn-text"}),_.isObject(e)){l=e.model.attributes.settings.toJSON();var c=_.isUndefined(l[n.text])?"":l[n.text],p=!(_.isUndefined(l[n.oldIcon])||!l[n.oldIcon]),h=!(_.isUndefined(l[n.newIcon])||!_.isObject(l[n.newIcon])||!l[n.newIcon].value);if(c||h||p)return t.hasIconLibrary()&&(o=elementor.helpers.renderIcon(e,l[n.newIcon],{"aria-hidden":!0,class:"ha-btn-icon"},"i","object"),i=elementor.helpers.isIconMigrated(l,n.newIcon)),e.addInlineEditingAttributes(n.text,"none"),e.addRenderAttribute(n.text,"class",n.textClass),e.addRenderAttribute("button","class",n.class),e.addRenderAttribute("button","href",l[n.link].url),(h||p)&&(t.hasIconLibrary()&&o&&o.rendered&&(!p||i)?a="svg"===l[n.newIcon].library?'<span class="ha-btn-icon ha-btn-icon--svg">'+o.value+"</span>":o.value:p&&(a='<i class="ha-btn-icon '+n.oldIcon+'" aria-hidden="true"></i>')),!c||h||p?c||!h&&!p?c&&(h||p)&&("before"===l[n.iconPos]?(e.addRenderAttribute("button","class","ha-btn--icon-before"),r=a,s="<span "+e.getRenderAttributeString(n.text)+">"+c+"</span>"):(e.addRenderAttribute("button","class","ha-btn--icon-after"),s=a,r="<span "+e.getRenderAttributeString(n.text)+">"+c+"</span>"),d=["<a "+e.getRenderAttributeString("button")+">",r,s,"</a>"]):d=["<a "+e.getRenderAttributeString("button")+">",a,"</a>"]:d=["<a "+e.getRenderAttributeString("button")+">","<span "+e.getRenderAttributeString(n.text)+">",c,"</span>","</a>"],d.join("")}},elementor.on("panel:init",function(){if(e("#elementor-panel-elements-search-input").on("keyup",_.debounce(function(){e("#elementor-panel-elements").find(".hm").parents(".elementor-element").addClass("is-ha-widget")},100)),"undefined"!=typeof $e||null!==$e){var t={callback:function(){var e=elementor.settings.page.model.attributes.ha_grid;""===e?elementor.settings.page.model.setExternalChange("ha_grid","yes"):"yes"===e&&elementor.settings.page.model.setExternalChange("ha_grid","")}};$e.shortcuts.register("ctrl+shift+g",t),$e.shortcuts.register("cmd+shift+g",t)}n()}),elementor.modules.layouts.panel.pages.menu.Menu.addItem({name:"happyaddons-home",icon:"hm hm-happyaddons",title:t.translate("editorPanelHomeLinkTitle"),type:"link",link:HappyAddonsEditor.editorPanelHomeLinkURL,newTab:!0},"settings"),elementor.hooks.addFilter("panel/elements/regionViews",function(e){if(HappyAddonsEditor.hasPro||_.isEmpty(HappyAddonsEditor.proWidgets))return e;var n,o,i=e.elements.view,a=e.categories.view,r=e.elements.options.collection,s=e.categories.options.collection,d=[];return _.each(HappyAddonsEditor.proWidgets,function(e,t){r.add({name:"ha-"+t,title:e.title,icon:e.icon,categories:["happy_addons_pro"],editable:!1})}),r.each(function(e){"happy_addons_pro"===e.get("categories")[0]&&d.push(e)}),o=s.findIndex({name:"happy_addons_category"}),o&&s.add({name:"happy_addons_pro_category",title:"Happy Addons Pro",icon:"hm hm-happyaddons",defaultActive:!1,items:d},{at:o+1}),n={className:function(){var e=this.constructor.__super__.className.call(this);return!this.isEditable()&&this.isHappyWidget()&&(e+=" ha-element--promotion"),e},isHappyWidget:function(){return 0===this.model.get("name").indexOf("ha-")},onMouseDown:function(){if(!this.isHappyWidget())return elementor.promotion.dialog.buttons[0].removeClass("ha-btn--promotion"),void this.constructor.__super__.onMouseDown.call(this);elementor.promotion.dialog.buttons[0].addClass("ha-btn--promotion"),elementor.promotion.showDialog({headerMessage:t.translate("promotionDialogHeader",[this.model.get("title")]),message:t.translate("promotionDialogMessage",[this.model.get("title")]),top:"-7",element:this.el,actionURL:"https://demo.happyaddons.com/"})}},e.elements.view=i.extend({childView:i.prototype.childView.extend(n)}),e.categories.view=a.extend({childView:a.prototype.childView.extend({childView:a.prototype.childView.prototype.childView.extend(n)})}),e}),window.ha=t}(jQuery,window.ha||{});